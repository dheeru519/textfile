properties([parameters([
  string(name: 'somestring', defaultValue: 'somevalue'),
  [$class: 'DateParameterDefinition',
   name: 'somedate',
   dateFormat: 'yyyy-MM-dd',
   defaultValue: 'LocalDate.now()']
])])

pipeline 
{
	agent any

	parameters 
  	{
    		string(name: 'MasterBuildNo', defaultValue: '1.0.$BUILD_NUMBER.0', description: 'Master Build Number ')
     		string(name: 'BuildNo', defaultValue: '1.0.$BUILD_NUMBER.0', description: 'Build Number ') 
 
    	}
 
  	stages {
  
   //Set master build name
            stage("Set Master Build Name") {
               steps {
                     script {
                           currentBuild.displayName=MasterBuildNo

                           echo "BuildNo: ${BuildNo}"      
			   
        			def Time = new Date()
        			println Time.format("yyyy-MM-dd.HH:mm:ss", TimeZone.getTimeZone('UTC'))

                     }
               }
            }   
             stage('Info File Creation') {
			      steps {
			      	
				      bat '''mkdir "C:\\Windows\\System32\\config\\systemprofile\\AppData\\Local\\Jenkins\\.jenkins\\workspace\\jenkinsfilecreation\\JenkinsOutput\\%BuildNo%"'''
				      
					
				      bat 'echo %BuildNo% > Info.txt'		
					
				      bat 'echo "$Date" >> Info.txt'
				      
				     
    					script {
        					def now = new Date()
        					println now.format("yyMMdd.HHmm", TimeZone.getTimeZone('UTC'))
   					}
 
				      bat 'echo "now" >> Info.txt'
				      
				      powershell 'Get-Date| Add-Content -Path C:\\Jenkins\\.jenkins\\workspace\\jenkinsfilecreation\\JenkinsOutput\\$env:BUILD_NUMBER\\Info.txt'
				
				      powershell '''ForEach-Object { Add-Content -Path "C:\\Jenkins\\.jenkins\\workspace\\jenkinsfilecreation\\JenkinsOutput\\$env:BUILD_NUMBER\\Info.txt" -Value "Calculation Engine Version: $env:BUILD_NUMBER","Author: $env:GIT_AUTHOR_NAME","Author Email: $GIT_COMMITTER_EMAIL","Github Repository: $env:GIT_URL","Commit Version: $env:GIT_COMMIT","Branch: $env:GIT_BRANCH" }'''
				
				      powershell '$UtcTime = Get-Date'
				
				      powershell '$UtcTime.ToUniversalTime()'
				
				      powershell '$UtcTime.ToUniversalTime() >> C:\\Jenkins\\.jenkins\\workspace\\jenkinsfilecreation\\JenkinsOutput\\$env:BUILD_NUMBER\\Info.txt'
				
				      powershell 'timestamp {"Date: $(Get-Date -Format G)"} >> C:\\Jenkins\\.jenkins\\workspace\\jenkinsfilecreation\\JenkinsOutput\\$env:BUILD_NUMBER\\Info.txt'
				
				      powershell '''Get-Content -Path "C:\\Jenkins\\.jenkins\\workspace\\jenkinsfilecreation\\JenkinsOutput\\$env:BUILD_NUMBER\\Info.txt"'''
			      }
	         }	
  	}
 }
